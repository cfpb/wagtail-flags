{% extends "wagtailadmin/base.html" %}
{% load i18n %}
{% load wagtailflags %}
{% block titletag %}{% trans "Flags" %}: {{ flag.name }}{% endblock %}

{% block content %}
    {% include "wagtailflags/includes/header.html" with title=flag.name icon="tag" %}

    <div class="nice-padding">
        {% with flag|conditions as conditions %}     
            {% if conditions|length > 0 %}
            <h2>Conditions</h2>
            <table class="listing">
                <thead>
                    <tr>
                        <th>Condition</th>
                        <th>Value</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                {% for condition in conditions %}
                    <tr>
                        <td>
                            <b>{{ condition.condition }}</b>
                        </td>
                        <td>
                            {{ condition.value }}
                        </td>
                        <td>
                            {% if condition.required %}
                            Required
                            {% else %}
                            Optional
                            {% endif %}
                        </td>
                        <td>
                            {% if condition.obj %}
                            <div class="button-group">
                            <a  href="{% url 'wagtailflags:edit_condition' flag.name condition.obj.pk %}" class="button button-small button-secondary">Edit</a>
                            <a  href="{% url 'wagtailflags:delete_condition' flag.name condition.obj.pk %}" class="button button-small no">Delete</a>
                            </div>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif %}
        {% endwith %}

        {% if flag|enabled %}
        <a href="{% url 'wagtailflags:flag_index' flag.name %}?disable" class="button button-secondary no">Disable {{ flag.name }}</a>
        {% else %}
        <a href="{% url 'wagtailflags:flag_index' flag.name %}?enable" class="button button-secondary">Enable {{ flag.name }}</a>
        {% endif %}
        <a href="{% url 'wagtailflags:create_condition' flag.name %}" class="button bicolor icon icon-plus">Add a condition</a>
    </div>
{% endblock %}
